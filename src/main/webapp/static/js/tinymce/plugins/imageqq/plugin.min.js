/**
 * plugin.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*global tinymce:true */

tinymce.PluginManager.add('imageqq', function(editor) {

	editor.addButton('imageqq', {
		icon: 'image',
		tooltip: '插入qq空间图片',
		onclick: function() {
			fusion2.dialog.selectPhoto({
	            onSuccess : function (opt) {
	                if (opt.data.photos){
	                    for (var photo in opt.data.photos){
	                        var src = opt.data.photos[photo].url;
	                        editor.insertContent('<img src="' + src + '" />');
	                    }
	                }
	            }
	        })
		}
	});
});